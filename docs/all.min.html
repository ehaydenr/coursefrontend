<!DOCTYPE html>

<html>
<head>
  <title>all.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>all.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    "use strict"</span>;

    <span class="hljs-keyword">var</span> scheedule = angular.module(<span class="hljs-string">'scheedule'</span>, [<span class="hljs-string">'ngRoute'</span>,<span class="hljs-string">'ngResource'</span>,<span class="hljs-string">'ngRoute'</span>,<span class="hljs-string">'ui.bootstrap'</span>, <span class="hljs-string">'angular-chartist'</span>, <span class="hljs-string">'angular.filter'</span>]);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Initialized Scheedule2 Angular.js application."</span>);

    scheedule.config([<span class="hljs-string">'$routeProvider'</span>,<span class="hljs-string">'$locationProvider'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$routeProvider,$locationProvider</span>) </span>{
        $locationProvider.html5Mode(<span class="hljs-literal">false</span>);

        $routeProvider
            .when(<span class="hljs-string">'/'</span>, {
                redirectTo  : <span class="hljs-string">'/index'</span>
            })
            .when(<span class="hljs-string">'/index'</span>, {
                templateUrl : <span class="hljs-string">'/views/index.html'</span>,
                controller  : <span class="hljs-string">'IndexController'</span>,
                controllerAs: <span class="hljs-string">'index'</span>
            })
            .when(<span class="hljs-string">'/schedule-viewer'</span>, {
                templateUrl : <span class="hljs-string">'/views/schedule-viewer.html'</span>,
                controller  : <span class="hljs-string">'ScheduleViewerController'</span>,
                controllerAs: <span class="hljs-string">'viewer'</span>
            })
            .when(<span class="hljs-string">'/manual-builder'</span>, {
                templateUrl : <span class="hljs-string">'/views/manual-builder.html'</span>,
                controller  : <span class="hljs-string">'ManualBuilderController'</span>,
                controllerAs: <span class="hljs-string">'mb'</span>
            })
            .when(<span class="hljs-string">'/auto-builder'</span>, {
                templateUrl : <span class="hljs-string">'/views/auto-builder.html'</span>,
                controller  : <span class="hljs-string">'AutoBuilderController'</span>,
                controllerAs: <span class="hljs-string">'ab'</span>
            });
    }]);
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">	"use strict"</span>;

	angular
		.module(<span class="hljs-string">'scheedule'</span>)
		.controller(<span class="hljs-string">'AutoBuilderController'</span>, AutoBuilderController);

	<span class="hljs-comment">/* @ngInject */</span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AutoBuilderController</span> (<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">var</span> ab = <span class="hljs-keyword">this</span>;

	    ab.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    	<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded auto builder controller."</span>);
	    }

	    ab.init();
	}
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">	"use strict"</span>;

	angular
		.module(<span class="hljs-string">'scheedule'</span>)
		.controller(<span class="hljs-string">'IndexController'</span>, IndexController);

	<span class="hljs-comment">/* @ngInject */</span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">IndexController</span> (<span class="hljs-params"></span>) </span>{
    	<span class="hljs-keyword">var</span> index = <span class="hljs-keyword">this</span>;

    	index.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    		<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded index controller."</span>);

    		index.message = <span class="hljs-string">"Angular in action!"</span>;
    	}

    	index.init();
	}
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    "use strict"</span>;

    angular
        .module(<span class="hljs-string">'scheedule'</span>)
        .controller(<span class="hljs-string">'ManualBuilderController'</span>, [<span class="hljs-string">'CourseDataService'</span>,<span class="hljs-string">'AgendaService'</span>,ManualBuilderController]);</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="manual-agenda-builder-controller">Manual Agenda Builder Controller</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Coordinates creating of agenda view, course selection accordions,
course searching and agenda/accordion interactions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ManualBuilderController</span> (<span class="hljs-params">CourseDataService, AgendaService</span>) </span>{
        <span class="hljs-keyword">var</span> mb = <span class="hljs-keyword">this</span>;
        mb.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded manual builder controller."</span>);
            mb.courses = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Load courses from Course Data Service.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            CourseDataService.getCourses(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">courses</span>) </span>{
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded courses."</span>);
                mb.courses = courses;
            }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Couldn't load course data from backend."</span>);
            });</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Initialize blank agenda.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            mb.agenda = AgendaService.blankAgenda();
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Fired upon clicking a section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        mb.clickSection = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section</span>) </span>{
            <span class="hljs-keyword">if</span> (section.active) {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>If we’re clicking a selected section, clear its active flag.
Then remove it from the calendar, and return it to the
mouseentered state.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                section.active = <span class="hljs-literal">false</span>;
                mb.agenda.removeSeriesForSection(section);
                mb.highlightSection(section);
            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>If we clicked an unselected section, exit the mouseentered
state. Set its active flag and add it to the agenda.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                mb.unhighlightSection(section);
                section.active = <span class="hljs-literal">true</span>;
                mb.agenda.addNormalSeriesForSection(section);
            }
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Fired when the mosueenter event occurs on a section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        mb.highlightSection = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Only add the translucent hover section to the agenda if the section
isn’t already selected.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!section.active) {
                section.hovering = <span class="hljs-literal">true</span>;
                mb.agenda.addHoverSeriesForSection(section);
            }
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Fired when the mosueleave event occurs on a section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        mb.unhighlightSection = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Only remove the hover section from the agenda if the section was
already being hovered over (i.e. prevent removing selected sections).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (section.hovering) {
                section.hovering = <span class="hljs-literal">false</span>;
                mb.agenda.removeSeriesForSection(section);
            }
        };

        mb.init();
    }
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">	"use strict"</span>;

	angular
		.module(<span class="hljs-string">'scheedule'</span>)
		.controller(<span class="hljs-string">'ScheduleViewerController'</span>, ScheduleViewerController);

	<span class="hljs-comment">/* @ngInject */</span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ScheduleViewerController</span> (<span class="hljs-params"></span>) </span>{
    	<span class="hljs-keyword">var</span> viewer = <span class="hljs-keyword">this</span>;

    	viewer.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    		<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded schedule view controller."</span>);
    	}

    	init();
	}
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    "use strict"</span>;

    angular
        .module(<span class="hljs-string">'scheedule'</span>)
        .service(<span class="hljs-string">'AgendaModelService'</span>, AgendaModelService);

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AgendaModelService</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> ams = <span class="hljs-keyword">this</span>;

        ams.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            ams.activeCourses = {};
            ams.operationList = [];
        };

        ams.verifyOperation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">operation</span>) </span>{
            <span class="hljs-keyword">if</span> (operation.type == <span class="hljs-string">"add"</span>) {
                <span class="hljs-keyword">return</span> {success: <span class="hljs-literal">true</span>};
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (operation.type == <span class="hljs-string">"add-hover"</span>) {
                <span class="hljs-keyword">return</span> {success: <span class="hljs-literal">true</span>};
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (operation.type == <span class="hljs-string">"remove"</span>) {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"tring to remove"</span>);
                <span class="hljs-built_in">console</span>.log(ams.activeCourses[operation.section.courseId][operation.section.id]);
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"from course"</span>);
                <span class="hljs-built_in">console</span>.log(ams.activeCourses[operation.section.courseId]);
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"while activeCourses is"</span>);
                <span class="hljs-built_in">console</span>.log(ams.activeCourses);
                <span class="hljs-keyword">if</span> (ams.activeCourses[operation.section.courseId][operation.section.id] === <span class="hljs-literal">undefined</span>) {
                    <span class="hljs-keyword">return</span> {success: <span class="hljs-literal">false</span>, err: <span class="hljs-string">"DOES_NOT_EXIST"</span>};
                }
                <span class="hljs-keyword">return</span> {success: <span class="hljs-literal">true</span>};
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> {success: <span class="hljs-literal">false</span>, err: <span class="hljs-string">"DUPLICATE"</span>};
            }
        };

        ams.mutateSchedule = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">operation, seriesData, errCallback</span>) </span>{
            <span class="hljs-keyword">var</span> verifyStatus = ams.verifyOperation(operation);
            <span class="hljs-keyword">if</span> (verifyStatus.success) {
                ams.operationList.push(operation);
                ams.executeOperation(operation, seriesData);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">var</span> shouldContinue = errCallback(verifyStatus.err);
                <span class="hljs-keyword">if</span> (shouldContinue) {
                    ams.executeOperation(operation, seriesData);
                }
            }
        }

        ams.executeOperation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">operation, seriesData</span>) </span>{
            <span class="hljs-built_in">console</span>.log(seriesData);
            <span class="hljs-keyword">if</span> (operation.type == <span class="hljs-string">"add"</span> || operation.type == <span class="hljs-string">"add-hover"</span>) {
                ams.executeAddOperation(operation, seriesData);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (operation.type == <span class="hljs-string">"remove"</span>) {
                ams.executeRemoveOperation(operation, seriesData);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>console.log(seriesData);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        };

        ams.executeAddOperation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">operation, seriesData</span>) </span>{
            <span class="hljs-keyword">var</span> newSeries = [];
            <span class="hljs-keyword">if</span> (operation.type == <span class="hljs-string">"add-hover"</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> day <span class="hljs-keyword">of</span> operation.section.days) {
                    newSeries.push(ams.seriesPointForSectionDay(operation.section,day,<span class="hljs-literal">true</span>));
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> day <span class="hljs-keyword">of</span> operation.section.days) {
                    newSeries.push(ams.seriesPointForSectionDay(operation.section,day,<span class="hljs-literal">false</span>));
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Add course to map of active courses if not already extant</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (ams.activeCourses[operation.section.courseId] === <span class="hljs-literal">undefined</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Initialize the active course object with an empty map of secitons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                ams.activeCourses[operation.section.courseId] = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Add our new series to the calendar</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                seriesData.push(newSeries);
                ams.activeCourses[operation.section.courseId].index = seriesData.indexOf(newSeries);</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Set the index of the first item in our new series in the array of items for our course</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                ams.activeCourses[operation.section.courseId][operation.section.id] = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Finally, increment the number of sections for our course</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                ams.activeCourses[operation.section.courseId].sectionCount = <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Otherwise, just add the new series to the array for our course</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> seriesPoint <span class="hljs-keyword">of</span> newSeries) {
                    seriesData[ams.activeCourses[operation.section.courseId].index].push(seriesPoint);
                }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Set the index of the first item in our new series in the array of items for our course</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                ams.activeCourses[operation.section.courseId][operation.section.id] = seriesData[ams.activeCourses[operation.section.courseId].index].indexOf(newSeries[<span class="hljs-number">0</span>]);
                ams.activeCourses[operation.section.courseId].sectionCount++;
            }
        }

        ams.executeRemoveOperation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">operation, seriesData</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Get index for our section</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> sectionIndex = ams.activeCourses[operation.section.courseId][operation.section.id];</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Get course index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> courseIndex = ams.activeCourses[operation.section.courseId].index;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Set entry in our course object for the section to be removed as undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            ams.activeCourses[operation.section.courseId][operation.section.id] = <span class="hljs-literal">undefined</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Splice out n entries from our course’s array in seriesData starting at our section index, where
n is the number of days for our section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            seriesData[courseIndex].splice(sectionIndex,operation.section.days.length);</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Iterate over our course object properties to find all entries corresponding to section indecies</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> property <span class="hljs-keyword">in</span> ams.activeCourses[operation.section.courseId]) {</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>If the property is strictly numeric…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (ams.activeCourses[operation.section.courseId].hasOwnProperty(property) &amp;&amp; ams.isNumeric(property)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Get the index for each section</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">var</span> candidateSectionIndex = ams.activeCourses[operation.section.courseId][property];</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>If this candidate index is greater than the index of the section we just removed from
our course’s array in seriesData, we have to reindex. Subtract the number of items we
spliced out from the section’s index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">if</span> (candidateSectionIndex &gt; sectionIndex) {
                        ams.activeCourses[operation.section.courseId][property] -= operation.section.days.length;
                    }
                }
            }
            ams.activeCourses[operation.section.courseId].sectionCount--;
            <span class="hljs-keyword">if</span> (ams.activeCourses[operation.section.courseId].sectionCount == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">var</span> courseIndex = ams.activeCourses[operation.section.courseId].index;
                ams.activeCourses[operation.section.courseId] = <span class="hljs-literal">undefined</span>;
                seriesData.splice(courseIndex,<span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Our course table needs to be reindexed in the same way as above</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> property <span class="hljs-keyword">in</span> ams.activeCourses) {
                    <span class="hljs-keyword">if</span> (ams.activeCourses.hasOwnProperty(property) &amp;&amp; property != <span class="hljs-string">'index'</span> &amp;&amp; property != <span class="hljs-string">'sectionCount'</span> &amp;&amp; property != operation.section.courseId &amp;&amp; ams.activeCourses[property] !== <span class="hljs-literal">undefined</span>) {
                        <span class="hljs-keyword">var</span> candidateCourseIndex = ams.activeCourses[property].index;
                        <span class="hljs-keyword">if</span> (candidateCourseIndex &gt; courseIndex) {
                            ams.activeCourses[property].index -= <span class="hljs-number">1</span>;
                        }
                    }
                }
            }
        }

        ams.seriesPointForSectionDay = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section, day, hover</span>) </span>{
            <span class="hljs-keyword">var</span> point = {
                x: day,
                y: section.startMoment.hours(),
                name: section.name,
                courseName: section.courseName,
                decimalHours: (section.endMoment.unix() - section.startMoment.unix())/<span class="hljs-number">3600.0</span>,
                type: <span class="hljs-string">"normal"</span>
            };
            <span class="hljs-keyword">if</span> (hover) {
                point.type = <span class="hljs-string">"hover"</span>;
            }
            <span class="hljs-keyword">return</span> point;
        };

        
        ams.isNumeric = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) </span>{
            <span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseFloat</span>(num)) &amp;&amp; <span class="hljs-built_in">isFinite</span>(num);
        };

        ams.init();
    }
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    "use strict"</span>;

    angular
        .module(<span class="hljs-string">'scheedule'</span>)
        .service(<span class="hljs-string">'AgendaService'</span>, [<span class="hljs-string">'AgendaModelService'</span>, AgendaService]);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h2 id="agenda-service">Agenda Service</h2>

            </div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Provides API wrapper around an agenda view. Allows for adding sections, removing sections.
Uses Agenda Model Service to provide feedback on these operations (adding a duplicate course,
removing a non-existent section).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AgendaService</span> (<span class="hljs-params">AgendaModelService</span>) </span>{
        <span class="hljs-keyword">var</span> <span class="hljs-keyword">as</span> = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">var</span> agenda = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Initialize service. Set displayed hour range.
Create functions on chart objects and initialize
chart data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">as</span>.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">as</span>.maxHour24 = <span class="hljs-number">18</span>;
            <span class="hljs-keyword">as</span>.minHour24 = <span class="hljs-number">6</span>;

            <span class="hljs-keyword">as</span>.initChartData();
            <span class="hljs-keyword">as</span>.initChartFunctions();    
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Add functions to calendar object returned by service.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">as</span>.initChartFunctions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Call into model service. Mutate schedule with add operation.
Alert “Duplicate section” if adding a duplicate section. Return success value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            agenda.addNormalSeriesForSection = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section</span>) </span>{
                AgendaModelService.mutateSchedule({
                    type: <span class="hljs-string">"add"</span>,
                    section: section,
                },
                agenda.chartData.series,
                <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
                    <span class="hljs-keyword">if</span> (err == <span class="hljs-string">"DUPLICATE"</span>) {
                        alert(<span class="hljs-string">"Duplaicate section, adding anyway."</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                });
            };

            agenda.addHoverSeriesForSection = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section</span>) </span>{
                AgendaModelService.mutateSchedule({
                    type: <span class="hljs-string">"add-hover"</span>,
                    section: section,
                },
                agenda.chartData.series,
                <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
                    <span class="hljs-keyword">if</span> (err == <span class="hljs-string">"DUPLICATE"</span>) {
                        alert(<span class="hljs-string">"Duplaicate section, adding anyway."</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                });
            };</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Call into model service. Mutate schedule with remove operation.
Alert “non-existent section” if removing a section not on agenda.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            agenda.removeSeriesForSection = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">section</span>) </span>{
                AgendaModelService.mutateSchedule({
                    type: <span class="hljs-string">"remove"</span>,
                    section: section,
                },
                agenda.chartData.series,
                <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
                    <span class="hljs-keyword">if</span> (err == <span class="hljs-string">"DOES_NOT_EXIST"</span>) {
                        alert(<span class="hljs-string">"We couldn't find the section you're trying to remove."</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                });
            };
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Set up drawing function on chart object, set chart options.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">as</span>.initChartData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            AgendaModelService.maxHour24 = <span class="hljs-number">18</span>;
            AgendaModelService.minHour24 = <span class="hljs-number">6</span>;
            agenda.chartEvents = {
                draw: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eventHandler</span>(<span class="hljs-params">data</span>) </span>{
                    <span class="hljs-keyword">if</span> (data.type === <span class="hljs-string">'point'</span>) {
                        <span class="hljs-keyword">var</span> w = data.axisX.axisLength/(data.axisX.ticks.length-<span class="hljs-number">1</span>);
                        <span class="hljs-keyword">var</span> newSvgElement = <span class="hljs-keyword">new</span> Chartist.Svg(<span class="hljs-string">'rect'</span>, {
                            x: data.x,
                            y: data.y,
                            width: w,
                            height: data.axisY.options.offset*data.series[data.index].decimalHours,
                            opacity: <span class="hljs-number">1.0</span>
                        }, <span class="hljs-string">'agenda-class-'</span>+<span class="hljs-number">0</span>);
                        <span class="hljs-keyword">if</span> (data.series[data.index].type == <span class="hljs-string">"hover"</span>) {
                            newSvgElement.addClass(<span class="hljs-string">'hover-section'</span>);
                        }
                        data.element.replace(newSvgElement);
                        data.group.elem(<span class="hljs-string">'text'</span>, {
                            x: data.x,
                            y: data.y+<span class="hljs-number">25</span>, 
                            fill: <span class="hljs-string">"white"</span>
                        }).text(
                            data.series[data.index].courseName+<span class="hljs-string">" - "</span>+data.series[data.index].name
                        );
                    }
                }
            };</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Label interpolation function determines how our axes are labled.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            agenda.chartOptions = {
                seriesBarDistance: <span class="hljs-number">0</span>,
                showLine: <span class="hljs-literal">false</span>,
                axisY: {
                    labelInterpolationFnc: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
                        value = <span class="hljs-keyword">as</span>.minHour24 + <span class="hljs-keyword">as</span>.maxHour24 - value;
                        <span class="hljs-keyword">if</span> (value == <span class="hljs-number">12</span>) {
                            <span class="hljs-keyword">return</span> value + <span class="hljs-string">":00 PM"</span>
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">12</span>) {
                            value = value % <span class="hljs-number">12</span>;
                            <span class="hljs-keyword">return</span> value + <span class="hljs-string">":00 PM"</span>
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">return</span> value + <span class="hljs-string">":00 AM"</span>
                        }
                    },
                    onlyInteger: <span class="hljs-literal">true</span>,
                    high: <span class="hljs-number">18</span>,
                    low: <span class="hljs-number">6</span>,
                },
                axisX: {
                    type: Chartist.AutoScaleAxis,
                    high: <span class="hljs-number">5</span>,
                    low: <span class="hljs-number">0</span>,
                    onlyInteger: <span class="hljs-literal">true</span>,
                    labelInterpolationFnc: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
                        <span class="hljs-keyword">if</span> (value == <span class="hljs-number">0</span>) {
                            <span class="hljs-keyword">return</span> <span class="hljs-string">"Monday"</span>;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value == <span class="hljs-number">1</span>) {
                            <span class="hljs-keyword">return</span> <span class="hljs-string">"Tuesday"</span>;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value == <span class="hljs-number">2</span>) {
                            <span class="hljs-keyword">return</span> <span class="hljs-string">"Wednsday"</span>;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value == <span class="hljs-number">3</span>) {
                            <span class="hljs-keyword">return</span> <span class="hljs-string">"Thursday"</span>;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value == <span class="hljs-number">4</span>) {
                            <span class="hljs-keyword">return</span> <span class="hljs-string">"Friday"</span>;
                        }
                    },
                }
            };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Set columns on chart. Set series data to be nothing initially.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            agenda.chartData = {
                labels: [<span class="hljs-string">'Monday'</span>, <span class="hljs-string">'Tuesday'</span>, <span class="hljs-string">'Wednsday'</span>, <span class="hljs-string">'Thursday'</span>, <span class="hljs-string">'Friday'</span>],
                series: []
            };
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Return blank agenda object, all set up and ready to be used.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">as</span>.blankAgenda = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> agenda;
        }

        <span class="hljs-keyword">as</span>.init();
    }
})();;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="hljs-pi">    "use strict"</span>;

    angular
        .module(<span class="hljs-string">'scheedule'</span>)
        .service(<span class="hljs-string">'CourseDataService'</span>, [<span class="hljs-string">'$http'</span>, CourseDataService]);

    <span class="hljs-comment">/* @ngInject */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CourseDataService</span> (<span class="hljs-params">$http</span>) </span>{
        <span class="hljs-keyword">var</span> cds = <span class="hljs-keyword">this</span>;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Loaded course data service."</span>);

        cds.init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            cds.timeFormat = <span class="hljs-string">"hh:mm a"</span>;
        }

        cds.getCourses = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">processCourses, processErr</span>) </span>{
            $http.get(<span class="hljs-string">'/api/all'</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">courses</span>) </span>{
                processCourses(cds.formatCourseArray(courses.data));
            }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
                processErr(err);
            });
        };

        cds.formatCourseArray = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">courses</span>) </span>{
            <span class="hljs-keyword">var</span> formattedCourses = []
            <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> course <span class="hljs-keyword">of</span> courses) {
                <span class="hljs-keyword">if</span> (++i &gt; <span class="hljs-number">10</span>) {
                    <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">var</span> formattedCourse = {
                    shortName: course.Department + <span class="hljs-string">" "</span> + course.CourseNumber,
                    longName: course.Name,
                    id: course.ID,
                    sections: []
                };
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> section <span class="hljs-keyword">of</span> course.Sections) {
                    formattedCourse.sections = cds.formatSectionsArray(formattedCourse,course.Sections);
                }
                formattedCourses.push(formattedCourse);
            }
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Finished formatting course array."</span>);
            <span class="hljs-keyword">return</span> formattedCourses;
        }

        cds.formatSectionsArray = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">course, sections</span>) </span>{
            <span class="hljs-keyword">var</span> formattedSections = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> section <span class="hljs-keyword">of</span> sections) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> meeting <span class="hljs-keyword">of</span> section.Meetings) {
                    <span class="hljs-keyword">var</span> days = cds.getDayIndicesFromInitialString(meeting.Days);
                    <span class="hljs-keyword">var</span> startDate = moment(meeting.Start,cds.timeFormat);
                    <span class="hljs-keyword">var</span> endDate = moment(meeting.End,cds.timeFormat);
                    formattedSections.push({
                        id: section.CRN,
                        courseId: course.shortName,
                        courseName: course.shortName,
                        name: section.Code,
                        startMoment: startDate,
                        endMoment: endDate,
                        days: days,
                        active: <span class="hljs-literal">false</span>,
                        hovering: <span class="hljs-literal">false</span>
                    });
                }
            }
            <span class="hljs-keyword">return</span> formattedSections;
        }

        cds.getDayIndicesFromInitialString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">initialString</span>) </span>{
            <span class="hljs-keyword">var</span> days = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> letterIndex = <span class="hljs-number">0</span>; letterIndex &lt; initialString.length; letterIndex++) {
                <span class="hljs-keyword">var</span> dayInitial = initialString.charAt(letterIndex);
                <span class="hljs-keyword">if</span> (dayInitial == <span class="hljs-string">'M'</span>) {
                    days.push(<span class="hljs-number">0</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dayInitial == <span class="hljs-string">'T'</span>) {
                    days.push(<span class="hljs-number">1</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dayInitial == <span class="hljs-string">'W'</span>) {
                    days.push(<span class="hljs-number">2</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dayInitial == <span class="hljs-string">'R'</span>) {
                    days.push(<span class="hljs-number">3</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dayInitial == <span class="hljs-string">'F'</span>) {
                    days.push(<span class="hljs-number">4</span>);
                }
            }
            <span class="hljs-keyword">return</span> days;
        }
        
        cds.init();
    }
})();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
